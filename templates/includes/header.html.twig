<header>
    <nav class="flex">
        <div class="header-logo">
            <a href="{{ path('home_index') }}" class="flex">
                <img src="{{ asset('build/images/header/home-logo.png') }}" alt="Logo Digi-3">
            </a> 
        </div>
        <ul class="flex">
            {% if permissionService.hasPermission('view_dashboard') %}
                <li class="{% if app.request.attributes.get('_route') == 'app_dashboard' %}active{% endif %}">
                    <a href="{{ path('app_dashboard') }}">Dashboard</a>
                </li>
            {% endif %}
            
            {% if permissionService.hasPermission('view_projects') %}
                <li class="{% if app.request.attributes.get('_route') == 'app_management_project' %}active{% endif %}">
                    <a href="{{ path('app_management_project') }}">Gestion de projets</a>
                </li>
            {% endif %}
            
            {% if permissionService.hasPermission('view_own_profile') %}
                <li class="{% if app.request.attributes.get('_route') == 'app_parameter_generaux' %}active{% endif %}">
                    <a href="{{ path('app_parameter_generaux') }}">Paramètres</a>
                </li>
            {% endif %}
        </ul>
        <form action="{{ path('app_logout') }}" method="post" class="logout-form flex" onsubmit="return showLogoutDialog(event);">
            <button type="submit" class="logout-btn flex">
                <img src="{{ asset('build/images/header/deconnect.png') }}" alt="Icône déconnexion">
            </button>
        </form>
    </nav>

    <!-- Modale de déconnexion améliorée -->
    <div id="logout-dialog" class="logout-dialog">
        <div class="logout-dialog-content">
            <div class="logout-dialog-header">
                <h3>Déconnexion</h3>
                <span class="close" onclick="closeLogoutDialog()">&times;</span>
            </div>
            <div class="logout-dialog-body">
                <p>Êtes-vous sûr de vouloir vous déconnecter ?</p>
                <p class="logout-subtitle">Vous devrez vous reconnecter pour accéder à votre compte.</p>
            </div>
            <div class="logout-dialog-buttons">
                <button type="button" onclick="closeLogoutDialog()">Annuler</button>
                <button type="button" onclick="confirmLogout()">Se déconnecter</button>
            </div>
        </div>
    </div>
</header>
